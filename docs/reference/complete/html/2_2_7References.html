<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<!--Converted with LaTeX2HTML 2008 (1.71)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>2.2.7 References</TITLE>
<META NAME="description" CONTENT="2.2.7 References">
<META NAME="keywords" CONTENT="m3-defn-complete">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META NAME="Generator" CONTENT="LaTeX2HTML v2008">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="../../../../normal.css">

<LINK REL="next" HREF="2_2_8Procedures.html">
<LINK REL="previous" HREF="2_2_6Sets.html">
<LINK REL="up" HREF="2_2Types.html">
<LINK REL="next" HREF="2_2_8Procedures.html">
</HEAD>

<BODY >

<DIV CLASS="navigation"><!--Navigation Panel-->
<A NAME="tex2html296"
  HREF="2_2_8Procedures.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html294"
  HREF="2_2Types.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html288"
  HREF="2_2_6Sets.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A>   
<BR>
<B> Next:</B> <A NAME="tex2html297"
  HREF="2_2_8Procedures.html">2.2.8 Procedures</A>
<B> Up:</B> <A NAME="tex2html295"
  HREF="2_2Types.html">2.2 Types</A>
<B> Previous:</B> <A NAME="tex2html289"
  HREF="2_2_6Sets.html">2.2.6 Sets</A>
<BR>
<BR></DIV>
<!--End of Navigation Panel-->

<H3><A NAME="SECTION00015700000000000000">
2.2.7 References</A>
</H3>

<P>
A <SPAN  CLASS="textit">reference</SPAN> value is either <code>NIL</code> or the address of a variable,
called the referent.

<P>
A reference type is either <SPAN  CLASS="textit">traced</SPAN> or <SPAN  CLASS="textit">untraced</SPAN>.  When all traced
references to a piece of allocated storage are gone, the implementation
reclaims the storage.  Two reference types are of the same <SPAN  CLASS="textit">reference
  class</SPAN> if they are both traced or both untraced.  A general type is traced
if it is a traced reference type, a record type any of whose field types is
traced, an array type whose element type is traced, or a packed type whose
underlying unpacked type is traced.

<P>
A declaration for a traced reference type has the form:
<PRE>
    TYPE T = REF Type
</PRE>
where <code>Type</code> is any type.  The values of <code>T</code> are traced references
to variables of type <code>Type</code>, which is called the <SPAN  CLASS="textit">referent type</SPAN> of
<code>T</code>.

<P>
A declaration for an untraced reference type has the form:
<PRE>
    TYPE T = UNTRACED REF Type
</PRE>
where <code>Type</code> is any untraced type.  (This restriction is lifted in unsafe
modules.) The values of <code>T</code> are the untraced references to variables of
type <code>Type</code>.

<P>
In both the traced and untraced cases, the keyword <code>REF</code> can optionally
be preceded by ``<code>BRANDED b</code>'' where <code>b</code> is a text constant called
the <SPAN  CLASS="textit">brand</SPAN>.  Brands distinguish types that would otherwise be the same;
they have no other semantic effect.  All brands in a program must be distinct.
If <code>BRANDED</code> is present and <code>b</code> is absent, the implementation
automatically supplies a unique value for <code>b</code>.  Explicit brands are
useful for persistent data storage.

<P>
The following reference types are predeclared:
<BLOCKQUOTE>
<TABLE CELLPADDING=3>
<TR><TD ALIGN="LEFT"><code>REFANY</code></TD>
<TD ALIGN="LEFT">Contains all traced references</TD>
</TR>
<TR><TD ALIGN="LEFT"><code>ADDRESS</code></TD>
<TD ALIGN="LEFT">Contains all untraced references</TD>
</TR>
<TR><TD ALIGN="LEFT"><code>NULL</code></TD>
<TD ALIGN="LEFT">Contains only <code>NIL</code></TD>
</TR>
</TABLE>
</BLOCKQUOTE>
The <code>TYPECASE</code> statement can be used to test the referent type of a
<code>REFANY</code> or object, but there is no such test for an <code>ADDRESS</code>.

<P>
Examples of reference types:
<PRE>
    TYPE TextLine = REF ARRAY OF CHAR;

    ControllerHandle = UNTRACED REF RECORD
      status: BITS 8 FOR [0..255];
      filler: BITS 12 FOR [0..0];
      pc: BITS 12 FOR [0..4095]
    END;

    T = BRANDED "ANSI-M3-040776" REF INTEGER;

    Apple  = BRANDED REF INTEGER;
    Orange = BRANDED REF INTEGER;
</PRE>

<P>

<DIV CLASS="navigation"><HR>
<!--Navigation Panel-->
<A NAME="tex2html296"
  HREF="2_2_8Procedures.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html294"
  HREF="2_2Types.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html288"
  HREF="2_2_6Sets.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A>   
<BR>
<B> Next:</B> <A NAME="tex2html297"
  HREF="2_2_8Procedures.html">2.2.8 Procedures</A>
<B> Up:</B> <A NAME="tex2html295"
  HREF="2_2Types.html">2.2 Types</A>
<B> Previous:</B> <A NAME="tex2html289"
  HREF="2_2_6Sets.html">2.2.6 Sets</A></DIV>
<!--End of Navigation Panel-->
<ADDRESS>
m3-support@elego.de
</ADDRESS>
</BODY>
</HTML>
