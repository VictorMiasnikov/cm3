<HTML><HEAD><TITLE>
libm3/src/os/POSIX/OSConfigPosixC.c</TITLE></HEAD><BODY BGCOLOR="#ffffff">
<H2>
libm3/src/os/POSIX/OSConfigPosixC.c</H2><HR>
<PRE>
/* Copyright 1996-2000, Critical Mass, Inc.  All rights reserved. */
/* See file COPYRIGHT-CMASS for details. */

#include &lt;sys/utsname.h&gt;
typedef struct utsname utsname_t;

#ifdef __cplusplus
extern &quot;C&quot;
{           
#endif

typedef void* TEXT;

TEXT M3toC__CopyStoT(const char*);

int
OSConfigPosixC__Init(
    TEXT* host_name,
    TEXT* host_arch,
    TEXT* os_name,
    TEXT* os_version)
{
    utsname_t uts;
    int result;

    result = uname(&amp;uts);
    if (result &lt; 0)
        goto Exit;

    *host_name  = M3toC__CopyStoT(uts.nodename);
    *host_arch  = M3toC__CopyStoT(uts.machine);
    *os_name    = M3toC__CopyStoT(uts.sysname);
    *os_version = M3toC__CopyStoT(uts.release);

Exit:
    return result;
}

#ifdef __cplusplus
} /* extern &quot;C&quot; */
#endif
</PRE>
</BODY>
</HTML>
