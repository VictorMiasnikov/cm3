<HTML>
<HEAD>
<TITLE>Critical Mass Modula-3: libm3/src/uid/Common/TimeStamp.i3</TITLE>
</HEAD>
<BODY bgcolor="#ffffff">
<A NAME="0TOP0">
<H2>libm3/src/uid/Common/TimeStamp.i3</H2></A><HR>
<inInterface>
<PRE></PRE> Copyright (C) 1989, Digital Equipment Corporation           
 All rights reserved.                                        
 See the file COPYRIGHT for a full description.              
                                                             
 Last modified on Tue Aug 24 08:45:26 PDT 1993 by kalsow     
      modified on Fri Apr 30 14:59:04 PDT 1993 by swart      

<P><PRE>INTERFACE <interface><A HREF="TimeStamp.m3.html">TimeStamp</A></interface>;

IMPORT <A HREF="../../../../m3core/src/time/Common/Time.i3.html">Time</A>;

TYPE
  T     = RECORD r: Bytes; END;
  Bytes = ARRAY [0 .. 15] OF Byte;
  Byte  = BITS 8 FOR [0 .. 255];
</PRE> Each TimeStamp.T is unique globally.  TimeStamp.Ts are totally ordered
   in a relation that approximates the real time when the value was
   generated.  If two TimeStamp.Ts are generated in the same process then
   the ordering of the TimeStamp.Ts is consistent with the order that New
   was called. 

<P><PRE>CONST
  First = T{r := Bytes{0, .. }};
  (* All time stamps generated by New are larger than First. *)

CONST
  Last = T{r := Bytes{255, .. }};
  (* All time stamps generated by New are smaller than Last *)

PROCEDURE <A HREF="TimeStamp.m3.html#New">New</A>(): T;
  (* Returns a new TimeStamp.T, unequal to any other produced by New, anywhere,
     anytime. *)
</PRE>***************************************************************************
 A note on uniqueness: The implementation of 'New' and uses the
real-time clock and assume that time flows monotonically and that this
machine cannot reboot in less than one second.  Consequently, if the
real-time clock moves <CODE>backwards in time</CODE>, the uniqueness guarantee of
this interface may be compromised.  
***************************************************************************

<P>
<P><PRE>PROCEDURE <A HREF="TimeStamp.m3.html#Compare">Compare</A>(READONLY t1, t2: T): [-1..1];
  (* Compares two time stamps according the the total order relationship. *)

PROCEDURE <A HREF="TimeStamp.m3.html#Max">Max</A>(READONLY t1, t2: T): T;
PROCEDURE <A HREF="TimeStamp.m3.html#Min">Min</A>(READONLY t1, t2: T): T;
  (* Convenience procedures *)

PROCEDURE <A HREF="TimeStamp.m3.html#Equal">Equal</A>(READONLY t1, t2: T): BOOLEAN;
  (* Returns TRUE if the two time stamps were generated by the same
     call  to New.  Equivalent to &quot;=&quot; for use by generic modules. *)

PROCEDURE <A HREF="TimeStamp.m3.html#Hash">Hash</A>(READONLY t: T): INTEGER;
  (* Returns a hash function of the timestamp usable by generic table
     packages. Note that unlike some other hash functions this
     hash function is invariant over byte order and word size.  As
     such the return value is always such that it fits in a 32
     bit integer *)

PROCEDURE <A HREF="TimeStamp.m3.html#ToTime">ToTime</A>(READONLY t: T): Time.T;
  (* Returns an approximation to the time the time stamp was generated.
     This can be compared with Time.Now for validating time stamps.
     Returns -1.0D0 if the time stamp is out of the range of times
     that can be represented by this machine.   This normally means
     that the TimeStamp was not generated by New.  *)

END TimeStamp.
</PRE>
</inInterface>
<PRE>























</PRE>
</BODY>
</HTML>
