<HTML>
<HEAD>
<TITLE>Critical Mass Modula-3: cube/derived/CubeBundle.m3</TITLE>
</HEAD>
<BODY bgcolor="#ffffff">
<A NAME="0TOP0">
<H2>cube/derived/CubeBundle.m3</H2></A><HR>
<inModule>
<PRE>MODULE <module><implements><A HREF="CubeBundle.i3.html">CubeBundle</A></implements></module>;
</PRE><BLOCKQUOTE><EM> Generated by m3bundle; see its manpage. </EM></BLOCKQUOTE><PRE>

IMPORT <A HREF="../../libm3/src/bundleintf/Bundle.i3.html">Bundle</A>, <A HREF="../../libm3/src/bundleintf/BundleRep.i3.html">BundleRep</A>, <A HREF="../../m3core/src/text/Text.i3.html">Text</A>;
IMPORT <A HREF="../../m3core/src/thread/Common/Thread.i3.html">Thread</A>, <A HREF="../../libm3/src/rw/Wr.i3.html">Wr</A>, <A HREF="../../libm3/src/rw/TextWr.i3.html">TextWr</A>;

TYPE T = Bundle.T OBJECT OVERRIDES
           get      := LookUp;
           getNames := GetNames;
         END;

TYPE Texts = REF ARRAY OF TEXT;

VAR
  bundle: T     := NIL;
  names : Texts := NIL;

PROCEDURE <A NAME="Get"><procedure>Get</procedure></A>(): Bundle.T =
  BEGIN
    IF (bundle = NIL) THEN bundle := NEW (T) END;
    RETURN bundle;
  END Get;

PROCEDURE <A NAME="GetNames"><procedure>GetNames</procedure></A> (&lt;*UNUSED*&gt; self: T): Texts =
  BEGIN
    IF names = NIL THEN
      names := NEW (Texts, NUMBER (Names));
      names^ := Names;
    END;
    RETURN names;
  END GetNames;

PROCEDURE <A NAME="LookUp"><procedure>LookUp</procedure></A> (&lt;*UNUSED*&gt; self: T;  element: TEXT): TEXT =
  BEGIN
    FOR i := 0 TO LAST (Names)-1 DO
      IF Text.Equal (Names[i], element) THEN
        IF Elements[i] = NIL THEN Elements[i] := GetElt (i) END;
        RETURN Elements[i];
      END;
    END;
    RETURN NIL;
  END LookUp;

CONST Names = ARRAY [0..1] OF TEXT {
  &quot;cube.fv&quot;,
  NIL
};

VAR Elements := ARRAY [0..1] OF TEXT {
  NIL (* E0 .. E0_0 *),
  NIL
};

PROCEDURE <A NAME="GetElt"><procedure>GetElt</procedure></A> (n: INTEGER): TEXT =
  &lt;*FATAL Thread.Alerted, Wr.Failure *&gt;
  VAR wr := TextWr.New ();
  BEGIN
    CASE n OF
    | 0 =&gt;
        Wr.PutText (wr, E0);
        Wr.PutText (wr, E0_0);
    ELSE (*skip*)
    END;
    RETURN TextWr.ToText (wr);
  END GetElt;

CONST E0 =
   &quot;(Rim\n  #| (Font \&quot;*-Courier-Bold-R-*-120-*-ISO8859-1\&quot;) |#\n  #| (Labe&quot;
 &amp; &quot;lFont \&quot;*-Helvetica-Bold-R-*-120-*-ISO8859-1\&quot;) |#\n  (Pen 10)\n  (VBox&quot;
 &amp; &quot;\n    (Rim\n      (Pen 10)\n      (Border\n        (BgColor \&quot;White\&quot;)\n&quot;
 &amp; &quot;        (Shape (Width 100 + Infinity) (Height 275 + Infinity) (Generic &quot;
 &amp; &quot;%cube))))\n    (Shape\n      (Height + 0)\n      (VBox\n        (HBox\n&quot;
 &amp; &quot;          (VBox\n            (HBox (TrillButton %spin (Shape (Width 45)&quot;
 &amp; &quot; (Height 25) \&quot;Spin\&quot;)))\n            Fill)\n          (Glue 8)\n      &quot;
 &amp; &quot;    (HBox\n            (Shape (Width 50) (Text LeftAlign \&quot;Rotate:\&quot;))\n&quot;
 &amp; &quot;            (VBox Fill (Numeric %rotate =4) Fill))\n          (Glue 8)\n&quot;
 &amp; &quot;          (VBox\n            (Shape\n              (Width + 0)\n       &quot;
 &amp; &quot;       (HBox\n                (Text LeftAlign \&quot;Style:\&quot;)\n            &quot;
 &amp; &quot;    (Radio\n                  (VBox\n                    (Choice %wiref&quot;
 &amp; &quot;rame =TRUE \&quot;Wireframe\&quot;)\n                    (Choice %solid \&quot;Solid\&quot;&quot;
 &amp; &quot;))))))\n          Fill)\n        (Glue 20)\n        (VBox\n          (T&quot;
 &amp; &quot;ext LeftAlign \&quot;Viewing position:\&quot;)\n          (HBox\n            (Glu&quot;
 &amp; &quot;e 20)\n            (VBox\n              (HBox\n                (Shape (&quot;
 &amp; &quot;Width 50) (Text RightAlign \&quot;Mu:  \&quot;))\n                (Numeric %mu (M&quot;
 &amp; &quot;in -1000) (Max 1000) =10)\n                Fill)\n              (HBox\n&quot;
 &amp; &quot;                (Shape (Width 50) (Text RightAlign \&quot;Theta:  \&quot;))\n    &quot;
 &amp; &quot;            (Numeric %theta (Min -1000) (Max 1000) =-30)\n             &quot;
 &amp; &quot;   Fill)\n              (HBox\n                (Shape (Width 50) (Text &quot;
 &amp; &quot;RightAlign \&quot;Phi:  \&quot;))\n                (Numeric %phi (Min -1000) (Max&quot;
 &amp; &quot; 1000) =30)\n                Fill)))\n          (Glue 8)\n          (HB&quot;
 &amp; &quot;ox (Boolean %buffer =TRUE \&quot;Double Buffer\&quot;) Fill)\n          (Glue 8))&quot;
 &amp; &quot;\n        (Glue 20)\n        (VBox\n          (Text LeftAlign \&quot;Project&quot;
 &amp; &quot;ion:\&quot;)\n          (HBox\n            (Glue 20)\n            (Radio\n  &quot;
 &amp; &quot;            (VBox\n                (HBox\n                  (Text LeftA&quot;
 &amp; &quot;lign \&quot;ScreenR:\&quot;)\n                  (Border (Shape (Width + Inf) (Typ&quot;
 &amp; &quot;eIn %screen =\&quot;4.0\&quot;))))\n                (HBox\n                  (Cho&quot;
 &amp; &quot;ice %ortho =TRUE (Text LeftAlign \&quot;&quot;;

CONST E0_0 =
   &quot;Orthographic\&quot;))\n                  Fill)\n                (HBox (Choic&quot;
 &amp; &quot;e %persp (Text LeftAlign \&quot;Perspective\&quot;)) Fill)\n                (HBox&quot;
 &amp; &quot;\n                  (Shape (Width 40) (Text RightAlign \&quot;d:\&quot;))\n      &quot;
 &amp; &quot;            (Border (Shape (Width + Inf) (TypeIn %d =\&quot;5.0\&quot;)))))))))))&quot;
 &amp; &quot;)\n&quot;;

BEGIN
END CubeBundle.
</PRE>
</inModule>
<PRE>























</PRE>
</BODY>
</HTML>
