<HTML>
<HEAD>
<TITLE>Critical Mass Modula-3: m3tk-misc/src/Sort.mg</TITLE>
</HEAD>
<BODY bgcolor="#ffffff">
<A NAME="0TOP0">
<H2>m3tk-misc/src/Sort.mg</H2></A><HR>
<inModule>
<PRE></PRE> Copyright (C) 1990, Digital Equipment Corporation.         
 All rights reserved.                                       
 See the file COPYRIGHT for a full description.             
 Last modified on Fri Jan 28 10:55:23 PST 1994 by detlefs   

<P><PRE>GENERIC MODULE <genericModule><A HREF="Sort.ig.html">Sort</A></genericModule>(Elem);

IMPORT <A HREF="Csort.i3.html">Csort</A>;

VAR
  cp_g: CompareProc;

PROCEDURE <A NAME="Array"><procedure>Array</procedure></A>(
    VAR (*inout*) a: ARRAY OF Elem.T;
    p: CompareProc) RAISES {}=
  BEGIN
   WITH n = NUMBER(a) DO
     IF n # 0 THEN
       cp_g := p;
       Csort.qsort(ADR(a[0]), n, BYTESIZE(Elem.T),
         LOOPHOLE(RefCompare, Csort.CompareProc))
     END;
   END;
  END Array;

PROCEDURE <A NAME="RefCompare"><procedure>RefCompare</procedure></A>(rx, ry: UNTRACED REF Elem.T): INTEGER RAISES {}=
  BEGIN
    RETURN cp_g(rx^, ry^);
  END RefCompare;

BEGIN

END Sort.
</PRE>
</inModule>
<PRE>























</PRE>
</BODY>
</HTML>
