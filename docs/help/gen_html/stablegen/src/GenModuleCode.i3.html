<HTML>
<HEAD>
<TITLE>Critical Mass Modula-3: stablegen/src/GenModuleCode.i3</TITLE>
</HEAD>
<BODY bgcolor="#ffffff">
<A NAME="0TOP0">
<H2>stablegen/src/GenModuleCode.i3</H2></A><HR>
<inInterface>
<PRE></PRE> Copyright (C) 1991, Digital Equipment Corporation          
 All rights reserved.                                       
 See the file COPYRIGHT for a full description.             
 Created by Susan Owicki, rewritten by Carsten Weich        
 Last modified on Fri Sep 23 14:53:42 PDT 1994 by weich     

<P> Produce Modula-3 code for the stable object's
   implementation. The exception <CODE>StablegenError.E</CODE> is raised if
   some error in the users data structures is uncoverd. In general, this
   should not occur at this point.

<PRE>INTERFACE <interface><A HREF="GenModuleCode.m3.html">GenModuleCode</A></interface>;

IMPORT <A HREF="../../libm3/src/formatter/Formatter.i3.html">Formatter</A>, <A HREF="#x1">ImportList</A>, <A HREF="StablegenError.i3.html">StablegenError</A>, <A HREF="#x2">Type</A>;

PROCEDURE <A HREF="GenModuleCode.m3.html#Header">Header</A> (modWr     : Formatter.T;
                  implName  : TEXT;
                  methods   : ImportList.MethodList;
                  importList: ImportList.T           );
</PRE><BLOCKQUOTE><EM> Produce a module (with name <CODE>implName</CODE>) header together
   with the <CODE>IMPORT</CODE> statements (produced out of
   <CODE>importList</CODE>.  After that a declaration of an enumeration
   type is added.  It enumerates all update methods (using
   the list <CODE>methods</CODE>).  Code is written to <CODE>modWr</CODE>. </EM></BLOCKQUOTE><PRE>

PROCEDURE <A HREF="GenModuleCode.m3.html#Revealation">Revealation</A> (modWr  : Formatter.T;
                       repName: TEXT;
                       methods: ImportList.MethodList)
  RAISES {StablegenError.E};
</PRE><BLOCKQUOTE><EM> Produce the code for the revealation of the generic type
   <CODE>Stable.T</CODE>.  Code is written to <CODE>modWr</CODE>, <CODE>repName</CODE> is the filename of
   the instatiation of the generic part of the implementation,
   <CODE>methods</CODE> is a list of its update methods </EM></BLOCKQUOTE><PRE>

PROCEDURE <A HREF="GenModuleCode.m3.html#Surrogates">Surrogates</A> (modWr  : Formatter.T;
                      name   : Type.Qid;
                      repName: TEXT;
                      methods: ImportList.MethodList)
  RAISES {StablegenError.E};
</PRE><BLOCKQUOTE><EM> Produce the code of the methods that log their parameters.  Code is
   written to <CODE>modWr</CODE>, <CODE>name</CODE> is the object's name for which a stable
   implementation is produced, <CODE>repName</CODE> is the name of the
   instantiated generic part of the generated code, <CODE>methods</CODE> is a
   list of its update methods </EM></BLOCKQUOTE><PRE>

PROCEDURE <A HREF="GenModuleCode.m3.html#Dispatcher">Dispatcher</A> (modWr  : Formatter.T;
                      methods: ImportList.MethodList)
  RAISES {StablegenError.E};
</PRE><BLOCKQUOTE><EM> Produce code for procedure which reads the log and starts all the
   redo stubs.  Code is written to <CODE>modWr</CODE>, <CODE>methods</CODE> is a list of its
   update methods </EM></BLOCKQUOTE><PRE>

PROCEDURE <A HREF="GenModuleCode.m3.html#ReplayStubs">ReplayStubs</A> (modWr  : Formatter.T;
                       name   : Type.Qid;
                       methods: ImportList.MethodList)
  RAISES {StablegenError.E};
</PRE><BLOCKQUOTE><EM> Produce code for the redo stubs.  Again <CODE>modWr</CODE> is the writer that
   takes the code, <CODE>type</CODE> is the object and <CODE>methods</CODE> is the list of
   the update methods </EM></BLOCKQUOTE><PRE>

PROCEDURE <A HREF="GenModuleCode.m3.html#Checkpoint">Checkpoint</A>(modWr: Formatter.T; repName: TEXT);
</PRE><BLOCKQUOTE><EM> Generate the call to the procedure that does the checkpoint (which
   is in the generic part of the implementation of stable objects <CODE>repName</CODE>) </EM></BLOCKQUOTE><PRE>

END GenModuleCode.
</PRE>
</inInterface>
<HR>
<A NAME="x1">interface ImportList is in:
</A><UL>
<LI><A HREF="../../sharedobjgen/src/ImportList.i3.html#0TOP0">sharedobjgen/src/ImportList.i3</A>
<LI><A HREF="ImportList.i3.html#0TOP0">stablegen/src/ImportList.i3</A>
</UL>
<P>
<HR>
<A NAME="x2">interface Type is in:
</A><UL>
<LI><A HREF="../../cm3ide/src/nodes/Type.i3.html#0TOP0">cm3ide/src/nodes/Type.i3</A>
<LI><A HREF="../../m3front/src/types/Type.i3.html#0TOP0">m3front/src/types/Type.i3</A>
<LI><A HREF="../../sharedobjgen/src/Type.i3.html#0TOP0">sharedobjgen/src/Type.i3</A>
<LI><A HREF="Type.i3.html#0TOP0">stablegen/src/Type.i3</A>
<LI><A HREF="../../stubgen/src/Type.i3.html#0TOP0">stubgen/src/Type.i3</A>
</UL>
<P>
<PRE>























</PRE>
</BODY>
</HTML>
