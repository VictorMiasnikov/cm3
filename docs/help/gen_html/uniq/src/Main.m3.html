<HTML>
<HEAD>
<TITLE>Critical Mass Modula-3: uniq/src/Main.m3</TITLE>
</HEAD>
<BODY bgcolor="#ffffff">
<A NAME="0TOP0">
<H2>uniq/src/Main.m3</H2></A><HR>
<inModule>
<PRE>MODULE <module><implements><A HREF="../../m3core/src/main/Main.i3.html">Main</A></implements></module>;

IMPORT <A HREF="../../libm3/src/rw/Rd.i3.html">Rd</A>, <A HREF="../../libm3/src/rw/Stdio.i3.html">Stdio</A>, <A HREF="../../libm3/derived/TextRefTbl.i3.html">TextRefTbl</A>, <A HREF="../../m3core/src/thread/Common/Thread.i3.html">Thread</A>, <A HREF="../../libm3/src/rw/Wr.i3.html">Wr</A>;
IMPORT <A HREF="../../libm3/src/rw/FileRd.i3.html">FileRd</A>, <A HREF="../../libm3/src/params/Params.i3.html">Params</A>, <A HREF="../../libm3/src/os/Common/OSError.i3.html">OSError</A>;

PROCEDURE <A NAME="DoIt"><procedure>DoIt</procedure></A> () =
  &lt;*FATAL Rd.Failure, Rd.EndOfFile, Wr.Failure, Thread.Alerted, OSError.E *&gt;
  VAR
    txt: TEXT;
    seen := NEW (TextRefTbl.Default).init (200);
    rd: Rd.T := Stdio.stdin;
  BEGIN
    IF Params.Count = 2 THEN
      rd := FileRd.Open(Params.Get(1));
    END;
    WHILE NOT Rd.EOF (rd) DO
      txt := Rd.GetLine (rd);
      IF NOT seen.put (txt, NIL) THEN
        Wr.PutText (Stdio.stdout, txt);
        Wr.PutText (Stdio.stdout, Wr.EOL);
      END;
    END;
  END DoIt;

BEGIN
  DoIt ();
END Main.
</PRE>
</inModule>
<PRE>























</PRE>
</BODY>
</HTML>
