<HTML>
<HEAD>
<TITLE>Critical Mass Modula-3: m3core/src/runtime/common/RTOS.i3</TITLE>
</HEAD>
<BODY bgcolor="#ffffff">
<A NAME="0TOP0">
<H2>m3core/src/runtime/common/RTOS.i3</H2></A><HR>
<inInterface>
<PRE></PRE><PRE>
      Copyright (C) 1990, Digital Equipment Corporation           

| </PRE>
All rights reserved.                                        
| See the file COPYRIGHT for a full description.              
| Last modified on Fri Nov 18 15:44:19 PST 1994 by kalsow     
|      modified on Sun Feb 21 14:15:00 PST 1993 by jdd        
|      modified on Wed Jan 27 22:27:27 PST 1993 by mjordan    

<P> <CODE>RTOS</CODE> is a private interface that provides the low-level,
   OS-specific memory allocation and shutdown routines. 

<P><PRE>INTERFACE <interface><A HREF="#x1">RTOS</A></interface>;

PROCEDURE <A HREF="../POSIX/RTOS.m3.html#Exit">Exit</A> (n: INTEGER);
</PRE><BLOCKQUOTE><EM> Terminate current process with return code <CODE>n</CODE>. </EM></BLOCKQUOTE><PRE>

PROCEDURE <A HREF="../POSIX/RTOS.m3.html#Crash">Crash</A> ();
</PRE><BLOCKQUOTE><EM> Terminate current process with a crash </EM></BLOCKQUOTE><PRE>

&lt;* EXTERNAL &quot;RTOS__GetMemory&quot; *&gt;
PROCEDURE <A HREF="../POSIX/RTOSbrk.m3.html#GetMemory">GetMemory</A> (size: INTEGER): ADDRESS;
</PRE><BLOCKQUOTE><EM> Return the address of <CODE>size</CODE> bytes of unused storage </EM></BLOCKQUOTE><PRE>

PROCEDURE <A HREF="../../thread/PTHREAD/ThreadPThread.m3.html#LockHeap">LockHeap</A> ();
</PRE><BLOCKQUOTE><EM> Enters an allocator/collector critical section; the same thread may
   enter the critical section multiple times.  </EM></BLOCKQUOTE><PRE>

PROCEDURE <A HREF="../../thread/PTHREAD/ThreadPThread.m3.html#UnlockHeap">UnlockHeap</A> ();
</PRE><BLOCKQUOTE><EM> Leaves the critical section.  </EM></BLOCKQUOTE><PRE>

PROCEDURE <A HREF="../../thread/PTHREAD/ThreadPThread.m3.html#BroadcastHeap">BroadcastHeap</A> ();
</PRE><BLOCKQUOTE><EM> Restarts all threads that called <CODE>WaitHeap</CODE> sometime after the
   allocator/collector critical section is released. </EM></BLOCKQUOTE><PRE>

PROCEDURE <A HREF="../../thread/PTHREAD/ThreadPThread.m3.html#WaitHeap">WaitHeap</A> ();
</PRE><BLOCKQUOTE><EM> Blocks the caller until <CODE>BroadcastHeap</CODE> has been called and
   the allocator/collector critical section is released.   The
   caller must be in the critical section. </EM></BLOCKQUOTE><PRE>

PROCEDURE <A HREF="../POSIX/RTOS.m3.html#Write">Write</A> (a: ADDRESS;  n: INTEGER);
</PRE><BLOCKQUOTE><EM> Write the <CODE>n</CODE> bytes beginning at address <CODE>a</CODE> to the standard
   error output file or console. </EM></BLOCKQUOTE><PRE>

END RTOS.
</PRE>
</inInterface>
<HR>
<A NAME="x1">RTOS's implementation  is in:
</A><UL>
<LI><A HREF="../POSIX/RTOS.m3.html#0TOP0">m3core/src/runtime/POSIX/RTOS.m3</A>
<LI><A HREF="../POSIX/RTOSbrk.m3.html#0TOP0">m3core/src/runtime/POSIX/RTOSbrk.m3</A>
<LI><A HREF="../../thread/PTHREAD/ThreadPThread.m3.html#0TOP0">m3core/src/thread/PTHREAD/ThreadPThread.m3</A>
</UL>
<P>
<PRE>























</PRE>
</BODY>
</HTML>
