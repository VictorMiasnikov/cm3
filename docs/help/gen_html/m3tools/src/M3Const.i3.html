<HTML>
<HEAD>
<TITLE>Critical Mass Modula-3: m3tools/src/M3Const.i3</TITLE>
</HEAD>
<BODY bgcolor="#ffffff">
<A NAME="0TOP0">
<H2>m3tools/src/M3Const.i3</H2></A><HR>
<inInterface>
<PRE></PRE> Copyright 1996-2000 Critical Mass, Inc. All rights reserved.    
 See file COPYRIGHT-CMASS for details. 

<P><PRE>INTERFACE <interface><A HREF="M3Const.m3.html">M3Const</A></interface>;

IMPORT <A HREF="#x1">M3ID</A>, <A HREF="#x2">M3AST</A>, <A HREF="M3Type.i3.html">M3Type</A>, <A HREF="../../m3middle/src/Target.i3.html">Target</A>;

TYPE
  T = RECORD
    class : Class;
    info  : INTEGER;
    int   : Target.Int;
    float : Target.Float;
    type  : M3Type.T;
    ref   : REFANY;
  END;

  Class = {     (* other fields... *)
    Integer,    (* t.int == value,             t.type == TYPEOF(value) *)
    Float,      (* t.float == value,           t.type == TYPEOF(value) *)
    Enum,       (* t.info == ORD (value),      t.type == TYPEOF(value) *)
    Text,       (* t.ref == value:TEXT,        t.type == TYPEOF(value) *)
    Type,       (* t.type == value                                     *)
    Addr,       (* t.info == value,            t.type == TYPEOF(value) *)
    Set,        (* t.ref == value:M3SetVal.T,  t.type == TYPEOF(value) *)
    Record,     (* t.ref == value:M3RecVal.T,  t.type == TYPEOF(value) *)
    Array,      (* t.ref == value:M3ArrVal.T,  t.type == TYPEOF(value) *)
    Exception,  (* t.{info,ref} == {NodeIndex,M3AST} of decl           *)
    Proc,       (* t.{info,ref} == {NodeIndex,M3AST} of decl           *)
    Var,        (* t.{info,ref} == {NodeIndex,M3AST} of decl           *)
    GenericArg, (* t.{info,ref} == {NodeIndex,M3AST} of decl           *)
    Formal,     (* t.{info,ref} == {NodeIndex,M3AST} of decl           *)
    Module,     (* t.{info,ref} == {NodeIndex,M3AST} of decl           *)
    Builtin     (* t.info == ORD (M3Builtin.Proc)                      *)
  };

TYPE
  ImportOracle = OBJECT METHODS
    find (interface: M3ID.T): M3AST.T;
  END;

PROCEDURE <A HREF="M3Const.m3.html#Eval">Eval</A> (ast: M3AST.T;  loc: M3AST.NodeIndex;  env: ImportOracle;
                VAR(*OUT*) val: T) RAISES {Error};
</PRE><BLOCKQUOTE><EM> Evaluate and return in <CODE>val</CODE> the constant at node <CODE>loc</CODE> in <CODE>ast</CODE> using <CODE>env</CODE>
   to resolve any imported symbols. </EM></BLOCKQUOTE><PRE>

PROCEDURE <A HREF="M3Const.m3.html#IsEQ">IsEQ</A> (READONLY a, b: T): BOOLEAN;
</PRE><BLOCKQUOTE><EM> Return <CODE>a = b</CODE>. </EM></BLOCKQUOTE><PRE>

EXCEPTION Error (TEXT);

END M3Const.
</PRE>
</inInterface>
<HR>
<A NAME="x1">interface M3ID is in:
</A><UL>
<LI><A HREF="../../m3middle/src/M3ID.i3.html#0TOP0">m3middle/src/M3ID.i3</A>
<LI><A HREF="../../m3scan/src/M3ID.i3.html#0TOP0">m3scan/src/M3ID.i3</A>
</UL>
<P>
<HR>
<A NAME="x2">interface M3AST is in:
</A><UL>
<LI><A HREF="../../m3tk/src/ast/M3AST.i3.html#0TOP0">m3tk/src/ast/M3AST.i3</A>
<LI><A HREF="M3AST.i3.html#0TOP0">m3tools/src/M3AST.i3</A>
</UL>
<P>
<PRE>























</PRE>
</BODY>
</HTML>
