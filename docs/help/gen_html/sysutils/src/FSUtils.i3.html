<HTML>
<HEAD>
<TITLE>Critical Mass Modula-3: sysutils/src/FSUtils.i3</TITLE>
</HEAD>
<BODY bgcolor="#ffffff">
<A NAME="0TOP0">
<H2>sysutils/src/FSUtils.i3</H2></A><HR>
<inInterface>
<PRE></PRE> Copyright 1999-2002 elego Software Solutions GmbH, Berlin, Germany.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR
 * IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
 * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,
 * INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
 * NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
 * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 

<P>--------------------------------------------------------------------------
<PRE>INTERFACE <interface><A HREF="#x1">FSUtils</A></interface>;

IMPORT <A HREF="../../libm3/src/os/Common/Pathname.i3.html">Pathname</A>, <A HREF="../../libm3/derived/TextSeq.i3.html">TextSeq</A>;
FROM <A HREF="../../m3core/src/C/Common/Ctypes.i3.html">Ctypes</A> IMPORT int, const_char_star;
</PRE>--------------------------------------------------------------------------
<PRE>EXCEPTION E(TEXT);
</PRE>--------------------------------------------------------------------------
<PRE>PROCEDURE <A HREF="FSUtils.m3.html#Exists">Exists</A>(fn : Pathname.T) : BOOLEAN;
  (* &lt;=&gt; `fn' exists *)
</PRE>--------------------------------------------------------------------------
<PRE>PROCEDURE <A HREF="POSIX/FSUnix_cm3.m3.html#IsReadable">IsReadable</A>(fn : Pathname.T) : BOOLEAN;
  (* &lt;=&gt; `fn' is readable by this process *)
</PRE>--------------------------------------------------------------------------
<PRE>PROCEDURE <A HREF="POSIX/FSUnix_cm3.m3.html#IsWritable">IsWritable</A>(fn : Pathname.T) : BOOLEAN;
  (* &lt;=&gt; `fn' is writable by this process *)
</PRE>--------------------------------------------------------------------------
<PRE>PROCEDURE <A HREF="POSIX/FSUnix_cm3.m3.html#IsExecutable">IsExecutable</A>(fn : Pathname.T) : BOOLEAN;
  (* &lt;=&gt; `fn' is executable by this process *)
</PRE>--------------------------------------------------------------------------
<PRE>PROCEDURE <A HREF="FSUtils.m3.html#IsDir">IsDir</A>(fn : Pathname.T) : BOOLEAN;
  (* &lt;=&gt; `fn' is a directory *)
</PRE>--------------------------------------------------------------------------
<PRE>PROCEDURE <A HREF="FSUtils.m3.html#IsFile">IsFile</A>(fn : Pathname.T) : BOOLEAN;
  (* &lt;=&gt; `fn' is an ordinary file *)
</PRE>--------------------------------------------------------------------------
<PRE>PROCEDURE <A HREF="FSUtils.m3.html#MakeDir">MakeDir</A>(path : Pathname.T);
  (* Build all directories in `path', if they do not exist, or crash. *)
</PRE>--------------------------------------------------------------------------
<PRE>PROCEDURE <A HREF="FSUtils.m3.html#SubDirs">SubDirs</A>(path : Pathname.T; relative := FALSE) : TextSeq.T
  RAISES {E};
  (* Return a list of all subdirectories. *)
</PRE>--------------------------------------------------------------------------
<PRE>PROCEDURE <A HREF="FSUtils.m3.html#SubFiles">SubFiles</A>(path : Pathname.T; relative := FALSE) : TextSeq.T
  RAISES {E};
  (* Return a list of all ordinary files in directory `path'. *)
</PRE>--------------------------------------------------------------------------
<PRE>PROCEDURE <A HREF="FSUtils.m3.html#RemoveFile">RemoveFile</A>(fn : Pathname.T);
  (* Remove file `fn' if it exists and crash in case of errors. *)
</PRE>--------------------------------------------------------------------------
<PRE>PROCEDURE <A HREF="FSUtils.m3.html#RemoveDir">RemoveDir</A>(fn : Pathname.T);
  (* Remove directory `fn' if it exists and crash in case of errors. *)
</PRE>--------------------------------------------------------------------------
<PRE>PROCEDURE <A HREF="FSUtils.m3.html#TouchFile">TouchFile</A>(fn : Pathname.T);
  (* Touch the file `fn' and crash in case of errors. *)
</PRE>--------------------------------------------------------------------------
<PRE>PROCEDURE <A HREF="FSUtils.m3.html#Mkdir">Mkdir</A>(path : Pathname.T) RAISES {E};
  (* Build all directories in `path', if they do not exist. *)
</PRE>--------------------------------------------------------------------------
<PRE>PROCEDURE <A HREF="FSUtils.m3.html#Rm">Rm</A>(fn : Pathname.T) RAISES {E};
  (* Remove file `fn' if it exists. *)
</PRE>--------------------------------------------------------------------------
<PRE>PROCEDURE <A HREF="FSUtils.m3.html#Rmdir">Rmdir</A>(fn : Pathname.T) RAISES {E};
  (* Remove directory `fn' if it exists. *)
</PRE>--------------------------------------------------------------------------
<PRE>PROCEDURE <A HREF="FSUtils.m3.html#RmRec">RmRec</A>(fn : Pathname.T) RAISES {E};
  (* Remove directory `fn' and all its contents recursively. *)
</PRE>--------------------------------------------------------------------------
<PRE>PROCEDURE <A HREF="FSUtils.m3.html#Touch">Touch</A>(fn : Pathname.T) RAISES {E};
  (* Touch the file `fn'. *)
</PRE>--------------------------------------------------------------------------
<PRE>PROCEDURE <A HREF="FSUtils.m3.html#CanonicalPathname">CanonicalPathname</A>(fn : Pathname.T) : Pathname.T RAISES {E};
  (* Return a unique absolute path for file `fn'. *)
</PRE>--------------------------------------------------------------------------
<PRE>PROCEDURE <A HREF="FSUtils.m3.html#Cp">Cp</A>(src, dest : Pathname.T) RAISES {E};
  (* Copy file `src' to file 'dest'. *)
</PRE>---------------------------------------------------------------------------
<PRE>PROCEDURE <A HREF="FSUtils.m3.html#FileContents">FileContents</A>(fn : Pathname.T) : TEXT RAISES {E};
  (* Return the contents of file `fn' as text. *)
</PRE>---------------------------------------------------------------------------
<PRE>PROCEDURE <A HREF="FSUtils.m3.html#PutFile">PutFile</A>(fn : Pathname.T; data : TEXT) RAISES {E};
  (* Write `data' into file `fn'. Create or overwrite `fn' as needed. *)
</PRE>---------------------------------------------------------------------------

<P><PRE>&lt;*EXTERNAL FSUtils__X_OK*&gt; VAR X_OK: int; (* executable *)
&lt;*EXTERNAL FSUtils__W_OK*&gt; VAR W_OK: int; (* writable *)
&lt;*EXTERNAL FSUtils__R_OK*&gt; VAR R_OK: int; (* readable *)
&lt;*EXTERNAL FSUtils__access*&gt;PROCEDURE access (path: const_char_star; mode: int): int;

END FSUtils.
</PRE>
</inInterface>
<HR>
<A NAME="x1">FSUtils's implementation  is in:
</A><UL>
<LI><A HREF="FSUtils.m3.html#0TOP0">sysutils/src/FSUtils.m3</A>
<LI><A HREF="POSIX/FSUnix_cm3.m3.html#0TOP0">sysutils/src/POSIX/FSUnix_cm3.m3</A>
</UL>
<P>
<PRE>























</PRE>
</BODY>
</HTML>
