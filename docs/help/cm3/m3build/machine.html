<HTML>
<HEAD>
<TITLE>CM Modula-3: Machine and operating system dependencies</TITLE>
<LINK HREF="../../../../normal.css" REL="stylesheet" TYPE="text/css"></head>
<body>

<H2>Machine and operating system dependencies</H2>
<P>

The builder contains some built-in support for machine and
operating system dependencies. The package structure makes provision
for separate build directories for different machine and operating
system combinations. The default behaviour of <TT>cm3</TT> is to
generate the compiled object files, libraries and programs in the build
directory corresponding to the machine and operating system on which
<TT>cm3</TT> is executing.
<P>

The following set of variables exist to allow <TT>m3makefile</TT>s to be
parameterised by machine and operating system.
<PRE>
TARGET  
          This variable defines the machine type on which the library or
          program being built will execute. It is chosen from the standard
          set of machine types on which Modula-3 runs. Check the runtime
          or <tt>cm3</tt> packages for the complete set.
OS_TYPE  
          This variable defines the operating system under which the library
          or program being built will execute. Currently, Modula-3 supports
          two operating system variants, POSIX and WIN32. The former breaks
          down further into specific variants, but this variation is not made
          available to clients. [There is a way if you absolutely need it,
          see the unix package.]
BUILD_DIR  
          This names the package sub-directory in which object files,
          libraries and programs will be built. It is usually, but not
          always, the same as <TT>TARGET</TT>.
</PRE>
<P>

The net effect of the above allows a single package to build a family
of architectural variants, in different build sub-directories, where
each variant uses the same set of <TT>m3makefile</TT>s, parameterized by
the above variables. If this degree of flexibility is insufficient,
then the extra variation must be specified in a separate package,
which can use <TT>include_pkg</TT> to access the shared sources.
<PRE>
PKG_USE  
      This defines the location of the public package repository, e.g.
      <TT>/proj/m3/pkg</TT> or <TT>/usr/local/lib/m3/pkg</TT>.
<a name="WDROOT"></a>
WDROOT  
      This defines the standard location for a user's private package
      repository, typically <TT>$HOME/m3/pkg</TT>. This is typically used in
      <TT>override</TT> calls.
</PRE>
<P>

</BODY>
</HTML>
