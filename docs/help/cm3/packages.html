<html>
<head>
   <title>CM Modula-3: Packages</title>
   <meta name="GENERATOR" content="Mozilla/2.0GoldB2 (Win32)">
<LINK HREF="../../../normal.css" REL="stylesheet" TYPE="text/css"></head>
<body>

<h2>Packages</h2>

<p>CM Modula-3 is distributed as a set of packages. Each package is contained
in a single directory which conforms to a standard structure. The top level
directory should contain a <tt>README</tt> file (or index.html), and a
<tt>src</tt> subdirectory containing Modula-3 source files, and a derived
directory for each platform on which the package has been built. </p>

<p>The location of public packages, as well as any other variable is specified
in the cm3.cfg configuration file which is located in the same directory
as cm3 executable program. You can move the compiler or the public packages
around, as long as the configuration file stays at the same directory as
the compiler. </p>

<p>There are three primary types of packages: source, program, and library.
A source package contains a collection of sources, like html files; it
builds nothing. A <!--<a href="/program/">--><em>program package</em> constructs a
single executable program by compiling and linking the contents of a set
of source packages. Similarly, a <!--<a href="/library/">--><em>library package</em>
constructs a single library from a set of source packages. </p>

<p>The <tt>m3makefile</tt>, that describes the package, resides in the
<tt>src</tt> subdirectory of the package. Although it is common for all
the Modula-3 sources to also reside in the src directory, they may be distributed
in a more complex directory structure rooted at <tt>src</tt>. </p>

<p>The <tt>m3makefile</tt> for a source package simply lists the pieces
of source that are to be included in programs or libraries that include
the source package. </p>

<p>The <tt>m3makefile</tt> for a program package names the sources needed
to build the program, and the packages that it uses to satisfy its imports.
It ends with a single <tt>program()</tt> or <tt>Program()</tt> invocation.
See the <a href="example.html">example</a>. </p>

<p>The <tt>m3makefile</tt> for a library package names the sources to be
included in the library, and the packages that it uses to satisfy its imports.
It ends with a single <tt>library()</tt> or <tt>Library()</tt> invocation.
</p>

<p>Note that as in a program, all the imports of a package must be satisfied.
If a package A builds a library and any of the objects in that library
import interfaces from another library package B, then <tt>import(B)</tt>
must be specified in A's <tt>m3makefile</tt>. </p>

<p>Use <tt>cm3 -ship</tt> command to install a private package in the public
repository. Note that on some systems, you must have special privileges
to install public packages. </p>

<p>
<hr>
</body>
</html>
